<?php
// Database connection details
$host = 'localhost'; // Change to your database host
$username = 'root';  // Change to your database username
$password = '';      // Change to your database password
$database = 'rating_system'; // Database name

// Create a connection
$conn = new mysqli($host, $username, $password, $database);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Get form data
    $name = htmlspecialchars($_POST['name']);
    $email = htmlspecialchars($_POST['email']);
    $rate = intval($_POST['rate']);

    // Prepare and bind the SQL statement
    $stmt = $conn->prepare("INSERT INTO users (name, email, rate) VALUES (?, ?, ?)");
    $stmt->bind_param("ssi", $name, $email, $rate);

    // Execute the statement
    if ($stmt->execute()) {
        echo "<h2>Rating Submitted Successfully!</h2>";
        echo "<p>Name: $name</p>";
        echo "<p>Email: $email</p>";
        echo "<p>Rating:</p>";

        // Display stars based on the rating
        for ($i = 1; $i <= 5; $i++) {
            if ($i <= $rate) {
                echo "&#9733; "; // Filled star
            } else {
                echo "&#9734; "; // Empty star
            }
        }
    } else {
        echo "Error: " . $stmt->error;
    }

    // Close the statement
    $stmt->close();
}

// Close the connection
$conn->close();
?>
